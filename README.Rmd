---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  comment = "#>",
  fig.path = "man/figures/README-",
  fig.retina = 3
)
```

# conjointTools

<!-- badges: start -->
[![Lifecycle:
experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN
status](https://www.r-pkg.org/badges/version/conjointTools)](https://CRAN.R-project.org/package=conjointTools)
<!-- badges: end -->

This package contains tools for designing choice based conjoint survey experiments.

## Installation

The current version is not yet on CRAN, but you can install it from
Github using the **devtools** library:

```{r, eval=FALSE}
devtools::install_github("jhelvy/conjointTools")
```

Load the library with:
```{r}
library(conjointTools)
```

## Make experiment designs

The first step in designing an experiment is to define the attributes and levels for your experiment. Many of the functions in {conjointTools} are more convenient to use if you define these as a separate object. For example, let's say you're designing a conjoint experiment about apples. You might have the following attributes and levels:

```{r}
# Define the attributes and levels
levels <- list(
  price     = seq(1, 4, 0.5), # $ per pound
  type      = c('Fuji', 'Gala', 'Honeycrisp', 'Pink Lady', 'Red Delicious'),
  freshness = c('Excellent', 'Average', 'Poor')
)
```

With these levels defined, making the design of experiment is straightforward using the `makeDoe()` function:

```{r}
# Make a full-factorial design of experiment
doe <- makeDoe(levels)
head(doe)
```

You can also make an "optimized" fractional-factorial design based on different criteria. For example, to make a "D-optimal" design, add the `type = "D"` argument and specify the number of trials you want to use from the full factorial design:

```{r}
# Make a full-factorial design of experiment
doe <- makeDoe(levels, type = "D", nTrials = 50)
head(doe)
```

Once you've made your design, you can easily re-code it using the actual labels in your `levels` object using `recodeDesign()`:

```{r}
# Re-code levels
doe <- recodeDesign(doe, levels)
head(doe)
```

## Make conjoint surveys

A survey can be generated by randomly sampling from the design of experiment. The `makeSurvey()` function also eliminates the possibility of duplicate alternatives appearing in the same choice question:

```{r}
survey <- makeSurvey(
    doe       = doe,  # Design of experiment
    nResp     = 1000, # Total number of respondents (upper bound)
    nAltsPerQ = 3,    # Number of alternatives per question
    nQPerResp = 6     # Number of questions per respondent
)

dim(survey)
head(survey)
```

The resulting data frame includes the following additional columns:

- `respID`: Identifies each survey respondent.
- `qID`: Identifies the choice question answered by the respondent.
- `altID`:Identifies the alternative in any one choice observation.
- `obsID`: Identifies each unique choice observation across all respondents.

## Version and License Information

- Date First Written: *October 23, 2020*
- Most Recent Update: `r format(Sys.Date(), format="%B %d %Y")`
- License: [MIT](https://github.com/jhelvy/conjointTools/blob/master/LICENSE.md)
- [Latest Release](https://github.com/jhelvy/conjointTools/releases/latest): 0.0.2

## Citation Information

If you use this package for in a publication, we would greatly appreciate it if you cited it - you can get a bibtex citation entry with `citation("conjointTools")`:

```{r}
citation("conjointTools")
```
